<?xml version="1.0" encoding="utf-8" ?>
<entity-mappings xmlns="https://jakarta.ee/xml/ns/persistence/orm" version="3.1">
    <entity class="cmahy.webapp.taco.shop.kernel.domain.Ingredient">
        <attributes>
            <id name="id" access="PROPERTY" />
        </attributes>
    </entity>

    <entity class="cmahy.webapp.taco.shop.kernel.domain.Taco">
        <pre-persist method-name="prePersist" />

        <attributes>
            <id name="id" access="PROPERTY">
                <generated-value strategy="AUTO" />
            </id>
            <many-to-many
                name="ingredients"
                access="PROPERTY"
                fetch="LAZY"
                target-entity="cmahy.webapp.taco.shop.kernel.domain.Ingredient"
            />
        </attributes>
    </entity>

    <entity class="cmahy.webapp.taco.shop.kernel.domain.ClientOrder">
        <attributes>
            <id name="id" access="PROPERTY" >
                <generated-value strategy="AUTO" />
            </id>

            <many-to-one name="user" target-entity="cmahy.webapp.user.kernel.domain.User"/>

            <one-to-many name="tacos" target-entity="cmahy.webapp.taco.shop.kernel.domain.Taco">
                <cascade>
                    <cascade-all/>
                </cascade>
            </one-to-many>
        </attributes>
    </entity>
</entity-mappings>